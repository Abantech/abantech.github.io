define("Message Bus/MessageBus",["postal"],function(e){return{Initialize:function(){},Bus:e}}),define("Human Input Recognition and Processing/CustomGestureLibrariesAccess",["postal"],function(e){function r(){}function i(n,r){var i="custom library 1",s="my custom gesture",o="my custom gesture data";n.input==="BVH representation of a custom gesture"&&e.publish({channel:"Input.Processed.Custom."+i,topic:s,source:t,data:o})}var t="Custom Gesture Libraries",n={};return{Initialize:function(e){n=e},ProcessInput:function(e,t){i(e,t)}}}),define("Human Input Recognition and Processing/Hand Gestures/Helpers/HandHelper",[],function(){function t(t){e.ExtensionMeasure==t.ExtensionMeasure||e.ExtensionMeasure,e.FlexionMeasure==t.FlexionMeasure||e.FlexionMeasure,e.SupinationMeasure==t.SupinationMeasure||e.SupinationMeasure,e.UlnarDeviationMeasure==t.UlnarDeviationMeasure||e.UlnarDeviationMeasure,e.RadialDeviationMeasure==t.RadialDeviationMeasure||e.RadialDeviationMeasure}function n(e){return e.type==="right"?"Right":"Left"}function r(e){return e.direction[1]}function i(e){var t;return!u(e)&&!a(e)&&!f(e)&&(t={}),t}function s(t){var n,r=t.direction[1]-t.arm.direction()[1];return r>e.ExtensionMeasure&&(n={TBD:r}),n}function o(t){var n,r=t.direction[1]-t.arm.direction()[1];return r<e.FlexionMeasure&&(n={TBD:r}),n}function u(t){var r,i=t.roll()*(180/Math.PI);return i=n(t)==="Right"?-i:i,i>e.SupinationMeasure&&(r={TBD:i}),r}function a(t){var r,i=t.roll()*(180/Math.PI);return i=n(t)==="Right"?-i:i,i>e.PronationMeasure.Min&&i<e.PronationMeasure.Max&&(r={TBD:i}),r}function f(t){var r,i=t.roll()*(180/Math.PI);return i=n(t)==="Right"?-i:i,i<e.PronationMeasure.Min&&(r={TBD:i}),r}function l(t){var r,i=n(t)==="Right"?t.direction[0]-t.arm.direction()[0]:-1*t.direction[0]- -1*t.arm.direction()[0];return i>e.UlnarDeviationMeasure&&(r={TBD:i}),r}function c(t){var r,i=n(t)==="Right"?t.direction[0]-t.arm.direction()[0]:-1*t.direction[0]- -1*t.arm.direction()[0];return i<e.RadialDeviationMeasure&&(r={TBD:i}),r}var e={ExtensionMeasure:.5,FlexionMeasure:-0.5,SupinationMeasure:145,PronationMeasure:{Min:-35,Max:35},UlnarDeviationMeasure:.5,RadialDeviationMeasure:-0.2};return{Configure:t,GetSide:n,GetAngle:r,Neutral:i,Extension:s,Flexion:o,Supination:u,Pronation:a,HyperPronation:f,UlnarDeviation:l,RadialDeviation:c}}),define("Human Input Recognition and Processing/Hand Gestures/Helpers/FingerHelper",[],function(){function n(e){return e.fingers.filter(function(e){return e.extended})}function r(e){return e.fingers.filter(function(e){return e.extended}).map(function(e){return e.type})}function i(e){return t[e]}function s(e){return n(e).length}function o(t){return e[s(t)]}function u(e,t){var r=n(e);return r.filter(function(e){return t.indexOf(e)!=-1}).length===t.length}function a(e,t){var n=e.tipPosition,r=t.tipPosition,i=n[0],s=n[1],o=n[2],u=r[0],a=r[1],f=r[2];return Math.sqrt((i-u)*(i-u)+(s-a)*(s-a)+(o-f)*(o-f))}var e=["Zero","One","Two","Three","Four","Five"],t=["Thumb","Index","Middle","Ring","Pinky"];return{GetExtendedFingers:n,GetExtendedFingersIndicies:r,GetFingerLabel:i,GetExtendedFingersCount:s,GetExtendedFingersCountLabel:o,AreRequisiteFingersExtended:u,DistanceBetweenFingers:a}}),define("Human Input Recognition and Processing/Hand Gestures/One Hand Gestures/OneHandGestureDetection",["postal","Human Input Recognition and Processing/Hand Gestures/Helpers/HandHelper","Human Input Recognition and Processing/Hand Gestures/Helpers/FingerHelper"],function(e,t,n){function r(r,i,s){var o="Efficio Gesture Grimoire",u="OneHandGesture",a=t.GetSide(i);s[u]||(s[u]={}),s[u][a]||(s[u][a]={}),function(){var n=a+"HandDetected";s[u][a][n]||(s[u][a][n]={StartTime:new Date}),e.publish({channel:"Input.Processed.Efficio",topic:n,source:o,data:{input:r,hand:i,gestureLength:Math.abs((s[u][a][n].StartTime-new Date)/1e3)}})}(),function(){var s=n.GetExtendedFingersCountLabel(i),u=n.GetExtendedFingersIndicies(i);e.publish({channel:"Input.Processed.Efficio",topic:a+"Hand"+s+"FingersExtended",source:o,data:{input:r,hand:i,extendedFingers:u}})}(),function(){i.fingers.forEach(function(t){var f=n.GetFingerLabel(t.type),l=a+"Hand"+f+"FingerExtended";t.extended?(s[u][a][l]||(s[u][a][l]={StartTime:new Date}),e.publish({channel:"Input.Processed.Efficio",topic:l,source:o,data:{input:r,hand:i,finger:t.type,gestureLength:Math.abs((s[u][a][l].StartTime-new Date)/1e3)}})):s[u][a][l]=null})}(),function(){var f=a+"HandFlexion",l=t.Flexion(i);l?(s[u][a][f]||(s[u][a][f]={StartTime:new Date}),e.publish({channel:"Input.Processed.Efficio",topic:f,source:o,data:{input:r,hand:i,flexion:l,gestureLength:Math.abs((s[u][a][f].StartTime-new Date)/1e3)}})):s[u][a][f]=null}(),function(){var f=a+"HandExtension",l=t.Extension(i);l?(s[u][a][f]||(s[u][a][f]={StartTime:new Date}),e.publish({channel:"Input.Processed.Efficio",topic:f,source:o,data:{input:r,hand:i,extension:l,gestureLength:Math.abs((s[u][a][f].StartTime-new Date)/1e3)}})):s[u][a][f]=null}(),function(){var f=a+"HandRadialDeviation",l=t.RadialDeviation(i);l?(s[u][a][f]||(s[u][a][f]={StartTime:new Date}),e.publish({channel:"Input.Processed.Efficio",topic:f,source:o,data:{input:r,hand:i,deviation:l,gestureLength:Math.abs((s[u][a][f].StartTime-new Date)/1e3)}})):s[u][a][f]=null}(),function(){var f=a+"HandUlnarDeviation",l=t.UlnarDeviation(i);l?(s[u][a][f]||(s[u][a][f]={StartTime:new Date}),e.publish({channel:"Input.Processed.Efficio",topic:f,source:o,data:{input:r,hand:i,deviation:l,gestureLength:Math.abs((s[u][a][f].StartTime-new Date)/1e3)}})):s[u][a][f]=null}(),function(){var f=a+"HandSupenation",l=t.Supination(i);l?(s[u][a][f]||(s[u][a][f]={StartTime:new Date}),e.publish({channel:"Input.Processed.Efficio",topic:f,source:o,data:{input:r,hand:i,supenation:l,gestureLength:Math.abs((s[u][a][f].StartTime-new Date)/1e3)}})):s[u][a][f]=null}(),function(){var f=a+"HandPronation",l=t.Pronation(i);l?(s[u][a][f]||(s[u][a][f]={StartTime:new Date}),e.publish({channel:"Input.Processed.Efficio",topic:f,source:o,data:{input:r,hand:i,pronation:l,gestureLength:Math.abs((s[u][a][f].StartTime-new Date)/1e3)}})):s[u][a][f]=null}(),function(){var f=a+"HandHyperPronation",l=t.HyperPronation(i);l?(s[u][a][f]||(s[u][a][f]={StartTime:new Date}),e.publish({channel:"Input.Processed.Efficio",topic:f,source:o,data:{input:r,hand:i,pronation:l,gestureLength:Math.abs((s[u][a][f].StartTime-new Date)/1e3)}})):s[u][a][f]=null}(),function(){var f=a+"HandNeutral",l=t.Neutral(i);l?(s[u][a][f]||(s[u][a][f]={StartTime:new Date}),e.publish({channel:"Input.Processed.Efficio",topic:f,source:o,data:{input:r,hand:i,neutral:l,gestureLength:Math.abs((s[u][a][f].StartTime-new Date)/1e3)}})):s[u][a][f]=null}(),function(){for(var f=0;f<i.fingers.length-1;f++)for(var l=f+1;l<i.fingers.length;l++){var c=a+"Hand"+n.GetFingerLabel(f)+n.GetFingerLabel(l)+"Pinch",h=n.DistanceBetweenFingers(i.fingers[f],i.fingers[l]);h<23?(s[u][a][c]||(s[u][a][c]={StartTime:new Date}),e.publish({channel:"Input.Processed.Efficio",topic:c,source:o,data:{input:r,hand:i,pinchDistance:h,pinchFingersIndicies:[f,l],gestureLength:Math.abs((s[u][a][c].StartTime-new Date)/1e3)}})):s[u][a][c]=null}}()}return{ProcessInput:r}}),define("Human Input Recognition and Processing/Hand Gestures/Two Hand Gestures/TwoHandGestureDetection",["postal","Human Input Recognition and Processing/Hand Gestures/Helpers/HandHelper","Human Input Recognition and Processing/Hand Gestures/Helpers/FingerHelper"],function(e,t,n){function r(n,r,i){var s="Efficio Gesture Grimoire",o="TwoHandGesture";i[o]||(i[o]={}),function(){var a="BothHandsNeutral",f=[t.Neutral(r[0]),t.Neutral(r[1])];if(f[0]&&f[1]){i[o][a]||(i[o][a]={StartTime:new Date});var l=r[0].palmPosition,c=r[1].palmPosition,h=c[0],p=c[1],d=c[2],v=l[0],m=l[1],g=l[2];e.publish({channel:"Input.Processed.Efficio",topic:a,source:s,data:{input:n,hand:hand,neutrals:f,distance:Math.sqrt((h-v)*(h-v)+(p-m)*(p-m)+(d-g)*(d-g)),midpoint:[(h-v)/2,(p-m)/2,(d-g)/2],gestureLength:Math.abs((i[o][a].StartTime-new Date)/1e3)}})}else i[o][a]=null}(),function(){var a="BothHandsPronation",f=[t.Pronation(r[0]),t.Pronation(r[1])];if(f[0]&&f[1]){i[o][a]||(i[o][a]={StartTime:new Date});var l=r[0].palmPosition,c=r[1].palmPosition,h=c[0],p=c[1],d=c[2],v=l[0],m=l[1],g=l[2];e.publish({channel:"Input.Processed.Efficio",topic:a,source:s,data:{input:n,hand:hand,neutrals:f,distance:Math.sqrt((h-v)*(h-v)+(p-m)*(p-m)+(d-g)*(d-g)),midpoint:[(h-v)/2,(p-m)/2,(d-g)/2],gestureLength:Math.abs((i[o][a].StartTime-new Date)/1e3)}})}else i[o][a]=null}()}return{ProcessInput:r}}),define("Human Input Recognition and Processing/Hand Gestures/HandGestureDetectionHandler",["postal","Human Input Recognition and Processing/Hand Gestures/Helpers/HandHelper"],function(e,t){function n(n,r){var i="Efficio Gesture Grimoire",s="Input.Processed.Efficio";if(n.input&&n.input.hands){var o=n.input.hands;(function(){var n="NoHandsDetected";if(o.length===0){r[n]||(r[n]={StartTime:new Date}),e.publish({channel:s,topic:n,source:i,data:{message:"No hands detected",gestureLength:Math.abs((r[n].StartTime-new Date)/1e3)}}),r.OneHandGesture=null,r.TwoHandGesture=null;return}r[n]=null})(),function(){if(o.length===1){var u=t.GetSide(o[0]),a="OneHandDetected";r[a]||(r[a]={StartTime:new Date});var f=u==="Right"?"Left":"Right";r.OneHandGesture&&(r.OneHandGesture[f]=null),r.TwoHandGesture&&(r.TwoHandGesture=null),e.publish({channel:s,topic:a,source:i,data:{handCount:o[0],gestureLength:Math.abs((r[a].StartTime-new Date)/1e3)}})}else r[a]=null}(),o.length>0&&(o.forEach(function(t){var o=t.type;e.publish({channel:s,topic:o+"HandDetected",source:i,data:{hand:t}}),require(["Human Input Recognition and Processing/Hand Gestures/One Hand Gestures/OneHandGestureDetection"],function(e){e.ProcessInput(n,t,r)})}),e.publish({channel:s,topic:"TwoHandDetected",source:i,data:{}}),o.length===2&&require(["Human Input Recognition and Processing/Hand Gestures/Two Hand Gestures/TwoHandGestureDetection"],function(e){e.ProcessInput(n,o,r)}))}}return{ProcessInput:n}}),define("Human Input Recognition and Processing/EfficioGestureGrimoire",["postal"],function(e){function r(e,t){var r=e.trackingType||"";switch(r){case"Hands":require(["Human Input Recognition and Processing/Hand Gestures/HandGestureDetectionHandler"],function(t){t.ProcessInput(e,n)});break;case"Body":break;case"Face":break;case"Brain":}}var t="Efficio Gesture Grimoire",n={};return{Initialize:function(e){n=e},ProcessInput:function(e,t){r(e,t)}}}),define("Human Input Recognition and Processing/EfficioAudioGrimoire",["postal"],function(e){function n(e){while(e.split("")[0]===" ")e=e.substring(1,e.lenght);while(e.split("")[e.lenght]===" ")e=e.substring(0,e.lenght-1);return e.toUpperCase()}function r(r,i){var s=n(r.message);s==="HELLO"&&e.publish({channel:"Input.Audio.Processed.Efficio",topic:"Hello",source:t,data:{message:s}}),s==="next".toUpperCase()&&e.publish({channel:"Input.Audio.Processed.Efficio",topic:"Next",source:t,data:{message:s}}),s==="last".toUpperCase()&&e.publish({channel:"Input.Audio.Processed.Efficio",topic:"Last",source:t,data:{message:s}}),s==="About".toUpperCase()&&e.publish({channel:"Input.Audio.Processed.Efficio",topic:"About",source:t,data:{message:s}}),s==="Samples".toUpperCase()&&e.publish({channel:"Input.Audio.Processed.Efficio",topic:"Samples",source:t,data:{message:s}}),s==="Download".toUpperCase()&&e.publish({channel:"Input.Audio.Processed.Efficio",topic:"Download",source:t,data:{message:s}}),s==="Home".toUpperCase()&&e.publish({channel:"Input.Audio.Processed.Efficio",topic:"Home",source:t,data:{message:s}}),e.publish({channel:"Input.Audio.Processed.Efficio",topic:"Unmapped",source:t,data:{message:s}}),s==="Contact".toUpperCase()&&e.publish({channel:"Input.Audio.Processed.Efficio",topic:"Contact",source:t,data:{message:s}}),s==="siguiente".toUpperCase()&&e.publish({channel:"Input.Audio.Processed.Efficio",topic:"Next",source:t,data:{message:s}}),s==="último".toUpperCase()&&e.publish({channel:"Input.Audio.Processed.Efficio",topic:"Last",source:t,data:{message:s}})}var t="Efficio Audio Grimoire";return{Initialize:function(){},ProcessInput:function(e,t){r(e,t)}}}),define("Human Input Recognition and Processing/HumanInputRecognitionAndProcessing",["postal"],function(e){return{Initialize:function(){var t={};require(["Human Input Recognition and Processing/CustomGestureLibrariesAccess"],function(n){n.Initialize(t),e.subscribe({channel:"Input.Raw",topic:"*",callback:function(e,t){n.ProcessInput(e,t)}})}),function(t){e.publish({channel:"UserNotification",topic:"Warn",source:source,data:{message:"No custom gesture library configured"}})},require(["Human Input Recognition and Processing/EfficioGestureGrimoire"],function(n){n.Initialize(t),e.subscribe({channel:"Input.Raw",topic:"*",callback:function(e,t){n.ProcessInput(e,t)}})}),require(["Human Input Recognition and Processing/EfficioAudioGrimoire"],function(t){t.Initialize(),e.subscribe({channel:"Input.Audio.Raw",topic:"*",callback:function(e,n){t.ProcessInput(e,n)}})})}}}),define("InternalScene",["THREE"],function(){var e=new THREE.Scene;return{Initialize:function(){},Scene:e}}),define("Asset Management and Inventory/AssetManager",["postal","InternalScene"],function(e,t){function r(r){e.publish({channel:"UserNotification",topic:"AssetCreated",source:n,data:{message:"Asset created with data: "+r}}),t.Scene.add(r)}function i(e){}function s(e){}function o(e){}function u(){}function a(){}function f(r){var i=t.Scene.getObjectById(r.id);t.Scene.remove(i),t.Scene.add(r),r=t.Scene.getObjectById(r.id),e.publish({channel:"UserNotification",topic:"AssetUpdated",source:n,data:{message:n+" - Asset Updated: \nID: "+r.id+"\nPosition: ("+r.position.x+" , "+r.position.y+", "+r.position.z+")"+"\nScale: ("+r.scale.x+" , "+r.scale.y+", "+r.scale.z+")"}})}function l(e){}function c(e){}function h(e){}function p(){}function d(e,t){switch(e){case"ClosestAsset":return v(t)}}function v(t){return t.location===null&&e.publish({channel:"Exception.Efficio",topic:"GetClosestAsset",source:n,data:{message:"GetClosestAsset function requires location argument"}}),"Asset closest to point ("+t.Location.x+", "+t.Location.y+", "+t.Location.z+")"}var n="Efficio Asset Manager";return{Initialize:function(){typeof window!="undefined"},CreateAsset:r,CreateAssets:i,RetrieveAsset:s,RetrieveAssets:o,RetrieveAllAssets:u,RetrieveAllAssetIDs:a,UpdateAsset:f,UpdateAssets:l,DeleteAsset:c,DeleteAssets:h,DeleteAllAssets:p,GetValueForProperty:d}}),define("Constraints Engine/ConstraintsEngine",["postal","Asset Management and Inventory/AssetManager"],function(e,t){function s(e){i.push(e)}function o(e){return!0}var n="Efficio Constraints Engine",r=!1,i=new Array;return{Initialize:function(){}}}),define("Command Issuance and Control/CommandIssuanceAndControl",["postal","Asset Management and Inventory/AssetManager"],function(e,t){function i(e){r.push(e)}function s(e,t,r){return n[e](t,r)}var n,r=[];return{Initialize:function(){function i(e){var t=e.toString().replace(n,""),i=t.slice(t.indexOf("(")+1,t.indexOf(")")).match(r);return i===null&&(i=[]),i}var n=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,r=/([^\s,]+)/g;ActionToFunctionMapping.ActionMappings.forEach(function(n){e.subscribe({channel:n.Source,topic:n.Topic,callback:function(e,r){var s=n.Action;typeof s!="function"&&(s=ActionToFunctionMapping.Bridge[n.Action]);var o=i(s),u={},a=[];n.Arguments?o.forEach(function(r){var i=n.Arguments.filter(function(e){return e.MapTo===r});if(i.length>0){var s;i[0].Source&&i[0].Source==="AssetManager"?s=t.GetValueForProperty(i[0].Name,e):s=e[i[0].Name],a.push(s)}else a.push(null)}):a=[e],s.apply(null,a)}})})}}}),define("Logging/SystemNotificationListener",["postal"],function(e){return{Initialize:function(){e.subscribe({channel:"SystemNotification",topic:"*",callback:function(e,t){console.log(t.topic+": "+e.message)}})}}}),define("Input/LeapMotion/LeapMotion",["postal","leapjs"],function(e,t){function s(e){return e={Host:e.Host||"localhost",Port:e.Port||6437,EnableGestures:e.EnableGestures||!1,FrameEventName:e.FrameEventName||"animationFrame",UseAllPlugins:e.UseAllPlugins||!1},e}var n="Leap Motion",r="Hands",i;return{Initialize:function(r){r=s(r),i=new t.Controller({host:r.Host,port:r.Port,enableGestures:r.EnableGestures,frameEventName:r.FrameEventName,useAllPlugins:r.UseAllPlugins}),i.on("gesture",function(t){t.state=="stop"&&e.publish({channel:"Input.Raw",topic:"Gesture",source:n,data:{name:t.type,gesture:t}})}),i.on("connect",function(){e.publish({channel:"Devices",topic:"Connected",source:n,data:{name:n,device:t,controller:i,test:"test"}})}),i.connect()},Start:function(){i.loop(function(t){t.valid&&e.publish({channel:"Input.Raw",topic:"Leap",source:n,data:{trackingType:r,input:t}})})}}}),define("Input/Microphone/Microphone",["postal","annyang"],function(e,t){var n="Microphone",r,i=!0,s=0;return{Intitialize:function(){typeof t!="undefined"&&typeof ActionToFunctionMapping.AudioCommands!="undefined"&&t.addCommands(ActionToFunctionMapping.AudioCommands)},Start:function(){t&&(t.start(),e.publish({channel:"Devices",topic:"Connected",source:n,data:{name:n,test:"test"}}))}}}),define("Efficio",["Message Bus/MessageBus","Human Input Recognition and Processing/HumanInputRecognitionAndProcessing","Asset Management and Inventory/AssetManager","Constraints Engine/ConstraintsEngine","Command Issuance and Control/CommandIssuanceAndControl","InternalScene","Logging/SystemNotificationListener"],function(e,t,n,r,i,s,o){function f(e){e.devices=e.devices||{microphone:!1,kinect:!1,leapmotion:!1},e.debug=e.debug||!1}var u,a;return{Initialize:function(l){f(l),e.Initialize(),t.Initialize(),n.Initialize(),r.Initialize(),i.Initialize(),s.Initialize(),o.Initialize(),l.devices.leapmotion&&require(["Input/LeapMotion/LeapMotion"],function(e){u=e,u.Initialize(l.devices.leapmotion),u.Start()}),l.devices.microphone&&require(["Input/Microphone/Microphone"],function(e){a=e,a.Intitialize(),a.Start()})},Start:function(){}}}),typeof THREE=="object"&&define("THREE",function(){return THREE}),typeof Leap=="function"&&define("leapjs",function(){return Leap}),require(["Efficio"],function(e){e.Initialize(EfficioConfiguration),e.Start()}),define("main",function(){});